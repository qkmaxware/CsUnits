name: Build
on:
  push: 
    branches: 
    - "master"
jobs:
  test:
    name: Test
    runs-on: ubuntu-latest
    container: 
      image: docker://mcr.microsoft.com/dotnet/core/sdk:3.0
    steps:
    - name: Checkout
      uses: actions/checkout@v1
    - name: Run Unit Tests
      run: dotnet test ${GITHUB_WORKSPACE}/Units.Tests
    - name: Run Examples
      run: dotnet run ${GITHUB_WORKSPACE}/Units.Examples
  build:
    name: Build & Pack
    runs-on: ubuntu-latest
    container: 
      image: docker://mcr.microsoft.com/dotnet/core/sdk:3.0
    needs: [ Test ]
    steps: 
    - name: Checkout
      uses: actions/checkout@v1
    - name: Build
      run: dotnet build ${GITHUB_WORKSPACE}
    - name: Pack
      run: dotnet pack ${GITHUB_WORKSPACE}
